---
title: GPU常见概念
date: 2019-12-23
tags: [TBR, GPU, 统一渲染, 分离式渲染, 固定功能渲染管线, 可编程渲染管线]
---

GPU架构设计中经常会看到诸如：统一渲染vs分离式渲染、固定功能vs可编程、立即渲染vs基于TILE的渲染vs基于TILE的延迟渲染等等。

不管GPU架构按照哪种分类方式都离不开三个要素：功耗、性能和面积。我们可以简记为PPA（Power、Performance、Area）。

一个好的GPU架构需要针对GPU产品的应用场景，在PPA组成的三角形中选择一个好的平衡点。比如移动端的GPU更加注重功耗和面积，而桌面端的GPU更加注重性能。

很早的GPU都采用固定功能的渲染管线。比如想要完成顶点渲染，那么你选择一个顶点光照算法，如Phong，然后使用硬件实现该算法。所谓固定，一旦你选择了Phong光照算法，那你的GPU就只支持这个算法，即使出现了一个更好的光照算法，你也无法更新。

于是，可编程渲染管线出现了。顶点着色和片段着色是可编程的，着色程序都运行在一个微处理器上。我们暂且称这个微处理器为Shader Core。

由于顶点着色程序对精度要求较高，而片段着色程序要求较低，并且一般情况下，少量的顶点会生成大量的片段，所以GPU设计者设计了两类Shader Core：一类专门处理顶点着色程序，称为顶点着色器；另一类专门处理片段着色程序，称为片段着色器。并且顶点着色器的数量少于片段着色器的数量。这便是分离式渲染：顶点着色和片段着色在各自专门的硬件单元中进行。

慢慢地会发现，处理小三角形比较多的场景时，顶点着色器利用率很高，而部分片段着色器空闲；处理大三角形比较多的场景或者渲染纹理较多的场景时，顶点着色器部分空闲，而片段着色器利用率很高。

那是不是可以设计一个Shader Core，它既可以做顶点着色，也可以做片段着色？答案是肯定的。

统一渲染由此诞生。

分离式渲染架构的GPU一般都采用IMR，TBR和TBDR是在统一渲染架构的GPU上衍生出来的。

IMR、TBR和TBDR的介绍请参看[《基于TILE的渲染》](https://www.gpuinsight.com/2019/12/22/tbr/)。
